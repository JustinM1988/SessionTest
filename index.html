<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ArcGIS OAuth2 (PKCE) ‚Ä¢ GitHub Pages Demo (Justin)</title>
  <!-- Local-only CSP: scripts load from this repo only -->
  <meta http-equiv="Content-Security-Policy" content="
    default-src 'self';
    script-src 'self';
    connect-src 'self' https://www.arcgis.com https://*.arcgis.com https://*.maps.arcgis.com;
    style-src 'self' 'unsafe-inline';
    img-src 'self' data: https:;
    base-uri 'self';
    form-action 'self' https://www.arcgis.com https://*.arcgis.com;
  ">
  <link rel="icon" href="data:,">
  <style>
    :root { --bg:#0b0d13; --card:#141824; --fg:#e7ebf3; --muted:#9aa4b2; --accent:#4cc9f0; }
    * { box-sizing: border-box; }
    body { margin: 0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
           background: radial-gradient(1200px 600px at 20% -10%, #182036 0%, var(--bg) 60%);
           color: var(--fg); min-height: 100svh; display: grid; place-items: center; padding: 24px; }
    .card { width: 100%; max-width: 820px; background: linear-gradient(180deg, #161b28, var(--card));
            border: 1px solid #22283a; border-radius: 16px; padding: 24px; box-shadow: 0 20px 50px rgba(0,0,0,0.45); }
    h1 { margin: 0 0 8px; font-size: clamp(20px, 2.4vw, 28px); }
    p { color: var(--muted); margin: 0 0 20px; }
    .row { display: flex; flex-wrap: wrap; gap: 12px; margin: 16px 0 12px; }
    button { appearance: none; border: 1px solid #2d3550; background: #1b2133; color: var(--fg);
             padding: 10px 14px; border-radius: 12px; cursor: pointer; font-weight: 600;
             transition: transform .05s ease, border-color .2s ease; }
    button:hover { border-color: var(--accent); }
    button:active { transform: translateY(1px); }
    button.secondary { background: transparent; }
    .badge { display: inline-flex; align-items: center; gap: 8px; border: 1px dashed #2d3550;
             border-radius: 999px; padding: 6px 10px; color: var(--muted); font-size: 13px; }
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; }
    pre { margin: 0; padding: 16px; background: #0f1320; border: 1px solid #232a42; border-radius: 10px; overflow: auto; max-height: 340px; }
    footer { margin-top: 16px; color: var(--muted); font-size: 12px; }
    a { color: var(--accent); text-decoration: none; }
  </style>
  <!-- LOCAL libs (you must add the two files under /vendor/ ) -->
  <script src="./vendor/auth.umd.min.js" defer></script>
  <script src="./vendor/request.umd.min.js" defer></script>
  <script src="./config.js" defer></script>
  <script src="./app.js" defer></script>
</head>
<body>
  <main class="card">
    <h1>ArcGIS OAuth2 (PKCE) Login Demo</h1>
    <p>Repo path: <code>https://justinm1988.github.io/SessionTest/</code><br/>Callback (must be in your ArcGIS app): <code>https://justinm1988.github.io/SessionTest/callback.html</code></p>
    <div class="row">
      <button id="login-btn">üîê Sign in with ArcGIS</button>
      <button id="whoami-btn" class="secondary">üôã Who am I?</button>
      <button id="logout-btn" class="secondary">üö™ Sign out</button>
      <span id="status" class="badge">Status: <span id="status-text">signed out</span></span>
    </div>
    <h3 style="margin:16px 0 8px;">Result</h3>
    <pre id="output" class="mono">// Sign in and click "Who am I?"</pre>
    <footer><span>Only <code>config.js</code> needs your Client ID. No other file contains placeholders.</span></footer>
  </main>
</body>
</html>
